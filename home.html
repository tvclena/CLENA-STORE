<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Home • AgendaBeauty</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

<style>
:root{
  --primary:#ff6a00;
  --bg:#f6f7fb;
  --card:#ffffff;
  --muted:#6b7280;
  --radius:16px;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:Inter}
body{background:var(--bg);padding:32px}

/* HEADER */
.header{margin-bottom:24px}
.header h1{font-size:26px;font-weight:800}
.header span{color:var(--primary)}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:20px;
  margin-bottom:28px;
}

/* CARD KPI */
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:22px;
  box-shadow:0 10px 30px rgba(0,0,0,.05);
}
.card small{color:var(--muted);font-weight:600}
.card h2{font-size:28px;margin-top:6px}
.card i{font-size:26px;color:var(--primary)}

/* ROW */
.row{
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:20px;
}

/* LIST */
.list{
  background:var(--card);
  border-radius:var(--radius);
  padding:22px;
  box-shadow:0 10px 30px rgba(0,0,0,.05);
}
.list h3{margin-bottom:16px}
.item{
  padding:12px;
  border-radius:12px;
  background:#f9fafb;
  margin-bottom:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.badge{
  background:#fff7ed;
  color:var(--primary);
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
}
.empty{
  color:var(--muted);
  text-align:center;
  padding:20px;
}
</style>
</head>

<body>

<div class="header">
  <h1>Bem-vindo ao <span>AgendaBeauty</span></h1>
</div>

<!-- KPIs -->
<div class="grid">
  <div class="card">
    <small>Agendamentos hoje</small>
    <h2 id="kpiHoje">0</h2>
    <i class="ri-calendar-check-line"></i>
  </div>

  <div class="card">
    <small>Clientes cadastrados</small>
    <h2 id="kpiClientes">0</h2>
    <i class="ri-user-3-line"></i>
  </div>

  <div class="card">
    <small>Faturamento do mês</small>
    <h2 id="kpiFaturamento">R$ 0</h2>
    <i class="ri-currency-line"></i>
  </div>

  <div class="card">
    <small>Serviços ativos</small>
    <h2 id="kpiServicos">0</h2>
    <i class="ri-scissors-line"></i>
  </div>
</div>

<!-- CONTEÚDO -->
<div class="row">

  <!-- AGENDA HOJE -->
  <div class="list">
    <h3>Agenda de hoje</h3>
    <div id="agendaHoje">
      <div class="empty">Nenhum horário agendado hoje</div>
    </div>
  </div>

  <!-- AVISOS -->
  <div class="list">
    <h3>Avisos</h3>

    <div class="item">
      <span>Complete seu cadastro</span>
      <span class="badge">Importante</span>
    </div>

    <div class="item">
      <span>Configure seus horários</span>
      <span class="badge">Agenda</span>
    </div>
  </div>

</div>

<script>
/* =====================================================
   SUPABASE VINDO DO DASHBOARD (SEM DUPLICAR)
===================================================== */
if(!window.parent || !window.parent.supabaseClient){
  document.body.innerHTML = "Supabase não inicializado no dashboard";
  throw new Error("Supabase não encontrado");
}
const supabase = window.parent.supabaseClient;

/* =====================================================
   LOAD BÁSICO (SEM QUEBRAR)
===================================================== */
(async ()=>{
  const { data:{ user } } = await supabase.auth.getUser();
  if(!user){
    document.body.innerHTML = "Usuário não autenticado";
    return;
  }

  // KPIs mock por enquanto (não quebra)
  document.getElementById("kpiHoje").innerText = "0";
  document.getElementById("kpiClientes").innerText = "0";
  document.getElementById("kpiFaturamento").innerText = "R$ 0";
  document.getElementById("kpiServicos").innerText = "0";
})();
</script>

</body>
</html>
